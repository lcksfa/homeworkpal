# 作业搭子 RAG 智能系统环境变量模板
# Homework Pal RAG System Environment Variables Template
# 复制此文件为 .env 并填入你的实际配置值

# =============================================================================
# 数据库配置 / Database Configuration
# =============================================================================
# PostgreSQL数据库连接URL
DATABASE_URL=postgresql://homeworkpal:password@localhost:5432/homeworkpal

# 数据库连接参数
DB_HOST=localhost
DB_PORT=5432
DB_NAME=homeworkpal
DB_USER=homeworkpal
DB_PASSWORD=password

# =============================================================================
# AI模型API配置 / AI Model API Configuration
# =============================================================================
# 请至少配置以下一个API密钥 / Please configure at least one API key below

# OpenAI API密钥（备用/备用模型）
OPENAI_API_KEY=your_openai_api_key_here

# 阿里云DashScope API密钥（推荐：通义千问Qwen）
DASHSCOPE_API_KEY=your_dashscope_api_key_here

# DeepSeek API密钥（推荐：DeepSeek-V2）
DEEPSEEK_API_KEY=your_deepseek_api_key_here

# =============================================================================
# 向量数据库配置 / Vector Database Configuration
# =============================================================================
# 向量维度（根据嵌入模型确定）
VECTOR_DIMENSION=1536

# 嵌入模型名称
EMBEDDING_MODEL=BAAI/bge-m3

# =============================================================================
# Chainlit前端配置 / Chainlit Frontend Configuration
# =============================================================================
# Chainlit服务主机
CHAINLIT_HOST=0.0.0.0

# Chainlit服务端口
CHAINLIT_PORT=8000

# =============================================================================
# 文件存储配置 / File Storage Configuration
# =============================================================================
# 上传文件存储目录
UPLOAD_DIR=./uploads

# 向量索引存储目录
VECTOR_INDEX_DIR=./vector_index

# 教材文档存储目录
TEXTBOOK_DIR=./data/textbooks

# 日志文件存储目录
LOG_DIR=./logs

# =============================================================================
# 日志配置 / Logging Configuration
# =============================================================================
# 日志级别 (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# 应用程序日志文件
LOG_FILE=./logs/app.log

# 数据库查询日志
DB_LOG_FILE=./logs/db.log

# =============================================================================
# 开发环境配置 / Development Configuration
# =============================================================================
# 开发模式（true/false）
DEBUG=true

# 热重载（true/false）
RELOAD=true

# 开发环境标识
ENVIRONMENT=development

# =============================================================================
# AI模型参数 / AI Model Parameters
# =============================================================================
# 最大token数
MAX_TOKENS=2000

# 温度参数（控制随机性）
TEMPERATURE=0.7

# Top-p参数
TOP_P=0.9

# =============================================================================
# RAG系统配置 / RAG System Configuration
# =============================================================================
# 检索结果数量
RETRIEVAL_TOP_K=5

# 文档分段大小
CHUNK_SIZE=1000

# 文档分段重叠
CHUNK_OVERLAP=200

# 相似度阈值
SIMILARITY_THRESHOLD=0.7

# =============================================================================
# 图像处理配置 / Image Processing Configuration
# =============================================================================
# 图像大小限制（MB）
MAX_IMAGE_SIZE_MB=10

# 支持的图像格式
SUPPORTED_IMAGE_FORMATS=jpeg,jpg,png,webp

# 图像处理超时（秒）
IMAGE_PROCESSING_TIMEOUT=60

# =============================================================================
# 错题本配置 / Mistake Notebook Configuration
# =============================================================================
# 错题记录默认难度等级
DEFAULT_DIFFICULTY_LEVEL=1

# 错题本每页显示数量
MISTAKES_PER_PAGE=10

# 错题导出格式
MISTAKE_EXPORT_FORMAT=markdown

# =============================================================================
# 缓存配置 / Cache Configuration
# =============================================================================
# Redis连接URL（如果使用Redis缓存）
REDIS_URL=redis://localhost:6379/0

# 缓存过期时间（秒）
CACHE_EXPIRE_TIME=3600

# 是否启用缓存
ENABLE_CACHE=true

# =============================================================================
# 安全配置 / Security Configuration
# =============================================================================
# JWT密钥（用于会话管理）
JWT_SECRET=your_jwt_secret_key_here

# 会话过期时间（秒）
SESSION_EXPIRE_TIME=86400

# CORS允许的源
CORS_ORIGINS=*

# =============================================================================
# 性能配置 / Performance Configuration
# =============================================================================
# 数据库连接池大小
DB_POOL_SIZE=10

# 数据库最大溢出连接数
DB_MAX_OVERFLOW=20

# API请求超时时间（秒）
API_TIMEOUT=30

# 并发处理的最大请求数
MAX_CONCURRENT_REQUESTS=100

# =============================================================================
# 监控配置 / Monitoring Configuration
# =============================================================================
# 是否启用性能监控
ENABLE_MONITORING=true

# 监控数据收集间隔（秒）
MONITORING_INTERVAL=60

# 健康检查间隔（秒）
HEALTH_CHECK_INTERVAL=30

# =============================================================================
# 第三方服务配置 / Third-party Services Configuration
# =============================================================================
# Hugging Face Token（用于下载模型）
HUGGINGFACE_TOKEN=your_huggingface_token_here

# Elasticsearch URL（如果使用Elasticsearch搜索）
ELASTICSEARCH_URL=http://localhost:9200

# MongoDB连接URL（如果使用MongoDB存储非结构化数据）
MONGODB_URL=mongodb://localhost:27017/homeworkpal

# =============================================================================
# 测试环境配置 / Testing Configuration
# =============================================================================
# 测试数据库URL
TEST_DATABASE_URL=postgresql://homeworkpal:password@localhost:5432/homeworkpal_test

# 测试环境数据目录
TEST_DATA_DIR=./tests/data

# 是否启用测试模式
TEST_MODE=false

# =============================================================================
# 生产环境特有配置 / Production-Only Configuration
# =============================================================================
# 生产环境请设置以下变量：
# ENVIRONMENT=production
# DEBUG=false
# LOG_LEVEL=WARNING
# CORS_ORIGINS=https://yourdomain.com
# HTTPS=true
# SSL_CERT_PATH=/path/to/cert.pem
# SSL_KEY_PATH=/path/to/key.pem

# =============================================================================
# 配置说明 / Configuration Notes
# =============================================================================
# 1. 必需配置：
#    - 至少一个AI模型的API密钥（推荐DASHSCOPE_API_KEY或DEEPSEEK_API_KEY）
#    - 数据库连接参数
#
# 2. 可选配置：
#    - Redis缓存（提升性能）
#    - 第三方服务（扩展功能）
#
# 3. 安全建议：
#    - 不要将 .env 文件提交到版本控制系统
#    - 生产环境请使用强密码
#    - 定期轮换API密钥
#
# 4. 性能优化：
#    - 根据系统资源调整数据库连接池大小
#    - 根据使用模式调整缓存配置
#    - 启用适当的日志级别