---
name: rag-feature-governor
description: 管理RAG项目的端到端功能清单feature_list.json。用于将用户需求扩展为完整的RAG功能测试项，强制执行数据结构规范，仅在E2E验证后更新通过状态。
allowed-tools: Read, Write, Grep
---

# RAG功能清单治理器

## 数据结构规范
```json
{
  "id": "HomeworkPal-XXX",
  "category": "文档处理|检索功能|生成功能|视觉功能|错题本|作业规划|用户界面|性能监控",
  "description": "三年级教育场景下的作业搭子功能描述，覆盖学生/家长使用场景的端到端流程",
  "steps": [
    "步骤1：学生/家长操作或系统状态",
    "步骤2：作业搭子系统处理流程（含RAG检索和教材溯源）",
    "步骤3：预期结果或教育效果验证点"
  ],
  "priority": 1,
  "passes": false
}
```

## HomeworkPal功能类别（基于feature_list.json的8个核心模块）

### 文档处理功能（5项）
- 人教版教材PDF解析与内容提取
- 基于教学结构的智能文档分段
- BGE-M3向量化处理与存储
- 教材元数据提取与知识点索引

### 检索功能（5项）
- 基于BGE-M3的语义相似度搜索
- 混合检索（语义+关键词BM25）
- 检索结果教育相关性排序
- 三年级适配的内容过滤机制

### 生成功能（5项）
- 基于检索内容的鼓励性回答生成
- 知识点溯源与教材标注
- 适合三年级学生的语言质量控制
- 启发式引导的语言模板

### 视觉功能（3项）
- 作业图片上传与手写识别
- VLM题目内容识别与分析
- 基于教学理念的智能批改

### 错题本功能（4项）
- 批改错题自动记录与归档
- 按知识点和难度智能分类
- "我学会了"确认机制
- PDF错题集生成

### 作业规划功能（2项）
- 家长作业通知智能解析
- Markdown格式任务清单生成
- 实时进度同步与更新

### 用户界面功能（5项）
- Chainlit交互式文档管理
- 查询界面与历史记录
- 结果展示与引用来源标注
- 错题本管理界面

### 性能监控功能（5项）
- 系统监控与性能指标
- 检索准确率与响应时间
- 生成质量评估机制
- 用户体验监控

## 指令说明
- 将用户提示扩展为全面的作业搭子端到端功能，初始设置passes=false
- 后续仅：在E2E证明后更新单个功能的passes=true
- 拒绝编辑description/steps；如果步骤有误，添加新功能项并通过治理笔记废弃旧项（不删除）

## 治理规则
- 初始化后，只有passes字段可修改
- 每个功能必须包含完整的学生/家长到作业搭子系统的流程验证
- 优先级排序：教材文档处理 > 作业批改检索 > 鼓励性生成 > 错题本管理 > 用户界面 > 性能监控
- 禁止删除功能项，只能标记废弃并添加新项
- 每个功能必须考虑三年级学生的教育特殊性和家长使用场景