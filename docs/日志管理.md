# æ—¥å¿—ç®¡ç†æŒ‡å—

## ðŸ“ æ—¥å¿—ç›®å½•ç»“æž„

æ‰€æœ‰æ—¥å¿—æ–‡ä»¶ç»Ÿä¸€å­˜å‚¨åœ¨ `logs/` ç›®å½•ä¸‹ï¼š

```
logs/
â”œâ”€â”€ app.log              # ä¸»åº”ç”¨æ—¥å¿—
â”œâ”€â”€ backend.log          # åŽç«¯APIæ—¥å¿—
â”œâ”€â”€ frontend.log         # å‰ç«¯ç•Œé¢æ—¥å¿—
â”œâ”€â”€ simple.log           # ç®€åŒ–ç‰ˆæœåŠ¡æ—¥å¿—
â”œâ”€â”€ api.log              # APIè¯·æ±‚æ—¥å¿—
â”œâ”€â”€ database.log         # æ•°æ®åº“æ“ä½œæ—¥å¿—
â”œâ”€â”€ llm.log              # LLMè°ƒç”¨æ—¥å¿—
â”œâ”€â”€ vision.log           # å›¾åƒå¤„ç†æ—¥å¿—
â”œâ”€â”€ init.log             # åˆå§‹åŒ–è„šæœ¬æ—¥å¿—
â”œâ”€â”€ simple_start.log     # ç®€åŒ–ç‰ˆå¯åŠ¨è„šæœ¬æ—¥å¿—
â”œâ”€â”€ backend_test.log     # åŽç«¯æµ‹è¯•æ—¥å¿—
â””â”€â”€ frontend_test.log    # å‰ç«¯æµ‹è¯•æ—¥å¿—
```

## ðŸ› ï¸ æ—¥å¿—å·¥å…·

### Pythonæ—¥å¿—å·¥å…·

é¡¹ç›®æä¾›äº†ç»Ÿä¸€çš„æ—¥å¿—å·¥å…· `homeworkpal.utils.logger`ï¼š

```python
from homeworkpal.utils.logger import get_logger, get_simple_logger

# èŽ·å–é€šç”¨æ—¥å¿—è®°å½•å™¨
logger = get_logger("my_component", "my_component.log")

# èŽ·å–é¢„å®šä¹‰çš„æ—¥å¿—è®°å½•å™¨
simple_logger = get_simple_logger()     # logs/simple.log
api_logger = get_api_logger()           # logs/api.log
db_logger = get_database_logger()       # logs/database.log
llm_logger = get_llm_logger()          # logs/llm.log
vision_logger = get_vision_logger()     # logs/vision.log
```

### è„šæœ¬æ—¥å¿—

å¯åŠ¨è„šæœ¬è‡ªåŠ¨å°†æ—¥å¿—å†™å…¥ `logs/` ç›®å½•ï¼š

```bash
# å¯åŠ¨ç®€åŒ–ç‰ˆæœåŠ¡
./scripts/start_services.sh
# æ—¥å¿—æ–‡ä»¶ï¼šlogs/simple_start.log, logs/backend.log, logs/frontend.log

# è¿è¡Œå®Œæ•´æµ‹è¯•
./scripts/test_complete.sh
# æ—¥å¿—æ–‡ä»¶ï¼šlogs/backend_test.log, logs/frontend_test.log

# åˆå§‹åŒ–çŽ¯å¢ƒ
./init.sh
# æ—¥å¿—æ–‡ä»¶ï¼šlogs/init.log, logs/backend.log, logs/frontend.log
```

## ðŸ“Š æ—¥å¿—æŸ¥çœ‹å‘½ä»¤

### å®žæ—¶æŸ¥çœ‹æ—¥å¿—

```bash
# æŸ¥çœ‹åŽç«¯æ—¥å¿—
tail -f logs/backend.log

# æŸ¥çœ‹å‰ç«¯æ—¥å¿—
tail -f logs/frontend.log

# æŸ¥çœ‹ç®€åŒ–ç‰ˆæ—¥å¿—
tail -f logs/simple.log

# æŸ¥çœ‹åˆå§‹åŒ–æ—¥å¿—
tail -f logs/init.log

# æŸ¥çœ‹å¤šä¸ªæ—¥å¿—æ–‡ä»¶
tail -f logs/backend.log logs/frontend.log
```

### æœç´¢æ—¥å¿—

```bash
# æœç´¢ç‰¹å®šé”™è¯¯
grep "ERROR" logs/backend.log

# æœç´¢ç‰¹å®šæ—¶é—´èŒƒå›´
grep "2025-12-09 20:" logs/*.log

# ç»Ÿè®¡é”™è¯¯æ•°é‡
grep -c "ERROR" logs/*.log
```

### æ—¥å¿—åˆ†æž

```bash
# æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶å¤§å°
du -sh logs/*

# æŸ¥çœ‹æœ€è¿‘çš„æ—¥å¿—æ¡ç›®
ls -lt logs/*.log | head -5

# æ¸…ç©ºæ—¥å¿—æ–‡ä»¶
> logs/backend.log
```

## âš™ï¸ æ—¥å¿—é…ç½®

### çŽ¯å¢ƒå˜é‡é…ç½®

åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®æ—¥å¿—è®¾ç½®ï¼š

```bash
# æ—¥å¿—çº§åˆ«
LOG_LEVEL=INFO

# æ—¥å¿—æ–‡ä»¶è·¯å¾„
LOG_FILE=./logs/app.log
DB_LOG_FILE=./logs/database.log
```

### æ—¥å¿—çº§åˆ«

- **DEBUG**: è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯
- **INFO**: ä¸€èˆ¬ä¿¡æ¯ï¼ˆæŽ¨èï¼‰
- **WARNING**: è­¦å‘Šä¿¡æ¯
- **ERROR**: é”™è¯¯ä¿¡æ¯
- **CRITICAL**: ä¸¥é‡é”™è¯¯

### æ—¥å¿—æ ¼å¼

é»˜è®¤æ—¥å¿—æ ¼å¼ï¼š
```
2025-12-09 20:08:15 - homeworkpal.simple - INFO - Starting Homework Pal v1.0.0
```

## ðŸ§¹ æ—¥å¿—æ¸…ç†

### è‡ªåŠ¨æ¸…ç†å»ºè®®

```bash
# åˆ›å»ºæ—¥å¿—æ¸…ç†è„šæœ¬
cat > scripts/cleanup_logs.sh << 'EOF'
#!/bin/bash
# æ¸…ç†7å¤©å‰çš„æ—¥å¿—æ–‡ä»¶
find logs/ -name "*.log" -mtime +7 -delete

# åŽ‹ç¼©å¤§æ—¥å¿—æ–‡ä»¶
find logs/ -name "*.log" -size +10M -exec gzip {} \;

echo "æ—¥å¿—æ¸…ç†å®Œæˆ"
EOF

chmod +x scripts/cleanup_logs.sh
```

### æ‰‹åŠ¨æ¸…ç†

```bash
# åˆ é™¤æ‰€æœ‰æµ‹è¯•æ—¥å¿—
rm logs/*test*.log

# åŽ‹ç¼©æ—§æ—¥å¿—
gzip logs/*.log.1

# æ¸…ç©ºæ—¥å¿—æ–‡ä»¶
> logs/backend.log
> logs/frontend.log
```

## ðŸ” æ•…éšœæŽ’é™¤

### å¸¸è§é—®é¢˜

1. **æ—¥å¿—æ–‡ä»¶æœªåˆ›å»º**
   - æ£€æŸ¥ `logs/` ç›®å½•æƒé™
   - ç¡®ä¿åº”ç”¨ç¨‹åºæœ‰å†™å…¥æƒé™

2. **æ—¥å¿—æ–‡ä»¶è¿‡å¤§**
   - ä½¿ç”¨æ—¥å¿—è½®è½¬
   - å®šæœŸæ¸…ç†æ—§æ—¥å¿—

3. **æ—¥å¿—çº§åˆ«è¿‡é«˜**
   - è°ƒæ•´ `LOG_LEVEL` çŽ¯å¢ƒå˜é‡
   - åœ¨ä»£ç ä¸­ä½¿ç”¨é€‚å½“çš„æ—¥å¿—çº§åˆ«

### æ—¥å¿—è½®è½¬é…ç½®

```bash
# å®‰è£…logrotate
brew install logrotate  # macOS
sudo apt-get install logrotate  # Ubuntu

# åˆ›å»ºé…ç½®æ–‡ä»¶
cat > /etc/logrotate.d/homeworkpal << 'EOF'
/Users/lizhao/workspace/hulus/homeworkpal/logs/*.log {
    daily
    missingok
    rotate 7
    compress
    delaycompress
    notifempty
    create 644 lizhao staff
}
EOF
```

## ðŸ“ˆ ç›‘æŽ§å»ºè®®

1. **ç›‘æŽ§ç£ç›˜ç©ºé—´**ï¼šå®šæœŸæ£€æŸ¥ `logs/` ç›®å½•å¤§å°
2. **ç›‘æŽ§é”™è¯¯çŽ‡**ï¼šå…³æ³¨ ERROR çº§åˆ«æ—¥å¿—
3. **æ€§èƒ½ç›‘æŽ§**ï¼šè®°å½•å…³é”®æ“ä½œçš„æ‰§è¡Œæ—¶é—´
4. **å®‰å…¨å®¡è®¡**ï¼šè®°å½•è®¿é—®å’Œè®¤è¯ç›¸å…³çš„æ—¥å¿—

## ðŸ›¡ï¸ éšç§æ³¨æ„

- æ—¥å¿—ä¸­ä¸åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼ˆå¯†ç ã€APIå¯†é’¥ç­‰ï¼‰
- å®šæœŸæ¸…ç†åŒ…å«ç”¨æˆ·æ•°æ®çš„æ—¥å¿—
- åœ¨ç”Ÿäº§çŽ¯å¢ƒä¸­è€ƒè™‘ä½¿ç”¨æ—¥å¿—è„±æ•